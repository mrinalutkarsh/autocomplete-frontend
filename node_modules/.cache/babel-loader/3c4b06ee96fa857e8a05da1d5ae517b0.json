{"ast":null,"code":"var _jsxFileName = \"/Users/mrutka/Desktop/search/src/Autocomplete.js\";\nimport React, { Component } from 'react';\nimport { debounce } from 'lodash';\nexport class Autocomplete extends Component {\n  constructor() {\n    super();\n    this.state = {\n      activeOption: 0,\n      filteredOptions: [],\n      showOptions: false,\n      userInput: ''\n    };\n\n    this.onChange = e => {\n      console.log('onChanges');\n      const {\n        options\n      } = this.props; // const userInput = e.currentTarget.value;\n      //console.log(\"e.currentTarget.value\",userInput);\n\n      this.setState({\n        //   activeOption: 0,\n        //   filteredOptions,\n        //   showOptions: true,\n        userInput: e.currentTarget.value\n      }, () => {\n        const {\n          userInput\n        } = this.state;\n        this.dbsearch(userInput);\n      });\n    };\n\n    this.fetchApi = userInput => {\n      debugger;\n      fetch(`http://localhost:9090/search/${userInput}`).then(p1 => Promise.resolve(p1)).then(p1 => p1.json()).then(p1 => {\n        console.log(p1);\n        this.setState({\n          filteredOptions: p1\n        });\n      });\n    };\n\n    this.onClick = e => {\n      this.setState({\n        activeOption: 0,\n        filteredOptions: [],\n        showOptions: false,\n        userInput: e.currentTarget.innerText\n      });\n    };\n\n    this.onKeyDown = e => {\n      const {\n        activeOption,\n        filteredOptions\n      } = this.state;\n\n      if (e.keyCode === 13) {\n        this.setState({\n          activeOption: 0,\n          showOptions: false,\n          userInput: filteredOptions[activeOption]\n        });\n      } else if (e.keyCode === 38) {\n        if (activeOption === 0) {\n          return;\n        }\n\n        this.setState({\n          activeOption: activeOption - 1\n        });\n      } else if (e.keyCode === 40) {\n        if (activeOption === filteredOptions.length - 1) {\n          console.log(activeOption);\n          return;\n        }\n\n        this.setState({\n          activeOption: activeOption + 1\n        });\n      }\n    };\n\n    this.dbsearch = userInput => debounce(() => this.fetchApi(userInput), 500);\n  } // static propTypes = {\n  //     options: PropTypes.instanceOf(Array).isRequired\n  // };\n\n\n  render() {\n    const {\n      onChange,\n      onClick,\n      onKeyDown,\n      state: {\n        activeOption,\n        filteredOptions,\n        showOptions,\n        userInput\n      }\n    } = this;\n    let optionList;\n\n    if (showOptions && userInput) {\n      if (filteredOptions.length) {\n        optionList = /*#__PURE__*/React.createElement(\"ul\", {\n          className: \"options\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 21\n          }\n        }, filteredOptions.map((optionName, index) => {\n          let className;\n\n          if (index === activeOption) {\n            className = 'option-active';\n          }\n\n          return /*#__PURE__*/React.createElement(\"li\", {\n            className: className,\n            key: optionName,\n            onClick: onClick,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 33\n            }\n          }, optionName);\n        }));\n      } else {\n        optionList = /*#__PURE__*/React.createElement(\"div\", {\n          className: \"no-options\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"em\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 25\n          }\n        }, \"No Option!\"));\n      }\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"search\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"search-box\",\n      onChange: onChange,\n      onKeyDown: onKeyDown,\n      value: userInput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"\",\n      className: \"search-btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 21\n      }\n    })), optionList);\n  }\n\n}\nexport default Autocomplete;","map":{"version":3,"sources":["/Users/mrutka/Desktop/search/src/Autocomplete.js"],"names":["React","Component","debounce","Autocomplete","constructor","state","activeOption","filteredOptions","showOptions","userInput","onChange","e","console","log","options","props","setState","currentTarget","value","dbsearch","fetchApi","fetch","then","p1","Promise","resolve","json","onClick","innerText","onKeyDown","keyCode","length","render","optionList","map","optionName","index","className"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {debounce} from 'lodash';\n\nexport class Autocomplete extends Component {\n\n    constructor(){\n        super();\n        this.dbsearch = (userInput) => debounce(() => this.fetchApi(userInput), 500);\n    }\n\n    // static propTypes = {\n    //     options: PropTypes.instanceOf(Array).isRequired\n    // };\n    state = {\n        activeOption: 0,\n        filteredOptions: [],\n        showOptions: false,\n        userInput: ''\n    };\n\n    onChange = (e) => {\n        console.log('onChanges');\n\n        const { options } = this.props;\n        // const userInput = e.currentTarget.value;\n        //console.log(\"e.currentTarget.value\",userInput);\n        this.setState({\n            //   activeOption: 0,\n            //   filteredOptions,\n            //   showOptions: true,\n            userInput: e.currentTarget.value\n        }, () => {\n            const { userInput } = this.state;\n            this.dbsearch(userInput)\n        });\n\n    };\n\n    fetchApi = (userInput) => {\n        debugger;\n        fetch(`http://localhost:9090/search/${userInput}`)\n            .then((p1) => Promise.resolve(p1))\n            .then((p1) => p1.json())\n            .then((p1) => {\n                console.log(p1);\n                this.setState({\n                    filteredOptions: p1\n                })\n            });\n    }\n        \n\n    onClick = (e) => {\n        this.setState({\n            activeOption: 0,\n            filteredOptions: [],\n            showOptions: false,\n            userInput: e.currentTarget.innerText\n        });\n    };\n    onKeyDown = (e) => {\n        const { activeOption, filteredOptions } = this.state;\n\n        if (e.keyCode === 13) {\n            this.setState({\n                activeOption: 0,\n                showOptions: false,\n                userInput: filteredOptions[activeOption]\n            });\n        } else if (e.keyCode === 38) {\n            if (activeOption === 0) {\n                return;\n            }\n            this.setState({ activeOption: activeOption - 1 });\n        } else if (e.keyCode === 40) {\n            if (activeOption === filteredOptions.length - 1) {\n                console.log(activeOption);\n                return;\n            }\n            this.setState({ activeOption: activeOption + 1 });\n        }\n    };\n\n    render() {\n        const {\n            onChange,\n            onClick,\n            onKeyDown,\n\n            state: { activeOption, filteredOptions, showOptions, userInput }\n        } = this;\n        let optionList;\n        if (showOptions && userInput) {\n            if (filteredOptions.length) {\n                optionList = (\n                    <ul className=\"options\">\n                        {filteredOptions.map((optionName, index) => {\n                            let className;\n                            if (index === activeOption) {\n                                className = 'option-active';\n                            }\n                            return (\n                                <li className={className} key={optionName} onClick={onClick}>\n                                    {optionName}\n                                </li>\n                            );\n                        })}\n                    </ul>\n                );\n            } else {\n                optionList = (\n                    <div className=\"no-options\">\n                        <em>No Option!</em>\n                    </div>\n                );\n            }\n        }\n        return (\n            <React.Fragment>\n                <div className=\"search\">\n                    <input\n                        type=\"text\"\n                        className=\"search-box\"\n                        onChange={onChange}\n                        onKeyDown={onKeyDown}\n                        value={userInput}\n                    />\n                    <input type=\"submit\" value=\"\" className=\"search-btn\" />\n                </div>\n                {optionList}\n            </React.Fragment>\n        );\n    }\n}\n\nexport default Autocomplete;\n"]},"metadata":{},"sourceType":"module"}